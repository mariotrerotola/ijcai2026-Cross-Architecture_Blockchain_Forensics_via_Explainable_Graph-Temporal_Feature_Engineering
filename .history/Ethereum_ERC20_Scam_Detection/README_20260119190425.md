# Ethereum ERC-20 Scam Detection

This module implements an ERC-20 scam detection pipeline using graph-temporal features from token transfer activity. It includes:

- Token transfer extraction (ERC-20, ETH native, internal transfers) via Etherscan.
- Graph and temporal feature extraction from transaction CSVs.
- Model training and evaluation across Balanced RF, MLP, and SVM.

Datasets are not included.

### Components

#### 1) Transaction extraction (Etherscan)

- `transaction_tracker_complete.py`
  - Fetches ERC-20 token transfers (`tokentx`), ETH native transfers (`txlist`), and internal transfers (`txlistinternal`).
  - Implements API key rotation and per-key rate limiting.
  - Streams results to CSV to reduce memory usage.

- `extract_history.py`
  - Batch runner for token contract addresses stored in a CSV (e.g., scam token lists).
  - Supports checkpoint/resume and parallel execution.
  - Produces per-token CSV files suitable for feature extraction.

Typical inputs:
- A CSV containing contract addresses (column name configurable via constants).
- One or more Etherscan API keys.

#### 2) Feature extraction (graph, temporal, statistics)

- `extract_features.py`
  - Loads token transaction CSVs, builds directed transfer graphs, and computes:
    - Node centralities and distribution statistics.
    - Temporal features (long-term vs short-term behavior).
    - Edge features (transfer value transforms, frequency, recency, accumulation).
    - Transaction-level aggregates (volume, address counts, time gaps, concentration).
  - Supports parallel processing and checkpointing for large corpora.
  - Writes per-source datasets into `data/dataset_with_features/<source>/features.csv`.

#### 3) Modeling notebooks

- `scam_detection_brf_hyperparameter_tuning_final.ipynb`
  - Balanced Random Forest hyperparameter search (`GridSearchCV`), decision threshold tuning on validation set, and evaluation.

- `scam_detection_svm_mlp_chainabuse_cmc.ipynb`
  - Comparative evaluation of BRF/MLP/SVM across dataset constructions.
  - Reuses preprocessing and feature selection per dataset and tunes decision thresholds on validation data.

### Dependencies and runtime notes

Dependencies are declared at the repository root (`../requirements.txt`).

Operational notes:
- Etherscan API usage requires valid API keys and may be rate limited; key rotation is supported.
- Large-scale extraction can generate many CSV files; ensure sufficient disk space.

